<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Search For Duplicate Specimens Among Collections — getDup • plantR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Search For Duplicate Specimens Among Collections — getDup" />
<meta property="og:description" content="This function searches for duplicate specimens among
collections, based on duplicate search strings." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plantR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/plantr_introduction.html">An Introduction to __plantR__</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/LimaRAF/plantR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Search For Duplicate Specimens Among Collections</h1>
    <small class="dont-index">Source: <a href='https://github.com/LimaRAF/plantR/blob/master/R/getDup.R'><code>R/getDup.R</code></a></small>
    <div class="hidden name"><code>getDup.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function searches for duplicate specimens among
collections, based on duplicate search strings.</p>
    </div>

    <pre class="usage"><span class='fu'>getDup</span><span class='op'>(</span>df <span class='op'>=</span> <span class='cn'>NULL</span>, flag.ind <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>a data frame with the unique record identifier (in the first
column) and the strings to be used for the duplicate search (second and
other columns). See Examples.</p></td>
    </tr>
    <tr>
      <th>flag.ind</th>
      <td><p>logical. Should duplicates based on indirect matches be
flagged with brackets? Default to TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The input data frame with new columns containing the number and
proportion of duplicated search strings found (i.e. 'dup.numb' and
'dup.prop') and the duplicated ID string ('dup.ID'). If no duplicate was
found dup.ID = NA.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function searches for duplicated specimens within and across
collections based on one or more duplicate search strings, typically the
output of the <strong>plantR</strong> function <code><a href='prepDup.html'>prepDup()</a></code>. These strings combine
different types of information (i.e. taxonomy, collection and locality).
For instance, a string combining information on taxonomy, collector last
name and number, and collection locality would look like:
'Myrtaceae_Silva_110_Curitiba'.</p>
<p>Strings too flexible (e.g. 'Silva_110') return more duplicated records but
many may be false duplicates. Strings too strict, on the other hand, may
miss true duplicates if some of the collections have not entered all search
fields or if they were entered using different notation standards. Finding
all existing duplicates requires that all collections are available and
that all search fields are complete, filled in without typos and using the
same notation standards. This is rarely the case, so the list of duplicates
returned should be considered incomplete in many cases. Moreover, to make
sure missing information does not prevent the retrieval of duplicates,
using more than two combinations of fields is advised. See Lima et al.
(2020) for an example of a conservative usage of different combinations
of strings to find duplicated specimens.</p>
<p>The function returns direct matches for up to one search string. If
two or more search strings are provided, the search of duplicates uses
tools from network analysis to find both direct and indirect matches of
strings between records. If records are grouped under the same duplicated
ID string ('dup.ID') but only based on indirect matches with other records,
'dup.ID' is returned between brackets (the default of argument <code>flag.ind</code>).
These IDs may need to be inspected more closely to detect possible spurious
matches.</p>
<p>Note that duplicate records can be physical (i.e. samples of the same
biological specimen incorporated in two or more collections) or virtual
(i.e. duplicated entries of the same record in different data
repositories). Although the function aims to detect the physical
duplicates, it also flags the virtual duplicates by adding 'virtual' inside
brackets  to the end of the duplicated ID string. Currently, this flag is
only added if the duplicate is purely virtual, i.e., if the virtual
duplicate is not also part of a physical duplicate.</p>
<p>Besides the duplicated ID, the function returns the number and proportion
of duplicated search strings found for each record within its group of
duplicates (i.e., 'dup.numb' and 'dup.prop'). These values can be used to
assess the confidence level that records are indeed true duplicates within
its group. The higher the 'dup.prop', the greater the chances that the
record is indeed a duplicate. To calculate the proportion of duplicates
found within the number of available search strings, mismatches due to
different or to missing strings are treated the same.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Lima, R.A.F. et al. 2020. Defining endemism levels for biodiversity
conservation: Tree species in the Atlantic Forest hotspot. Biological
Conservation, 252: 108825.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='prepDup.html'>prepDup</a>.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Renato A. F. de Lima</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>id<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a_1"</span>,<span class='st'>"b_3"</span>,<span class='st'>"c_7"</span>,<span class='st'>"d_5"</span>,<span class='st'>"e_3"</span>,
<span class='st'>"f_4"</span>,<span class='st'>"g_2"</span>,<span class='st'>"h_8"</span>,<span class='st'>"i_9"</span>,<span class='st'>"j_6"</span>,<span class='st'>"k_7"</span>,<span class='st'>"l_1"</span><span class='op'>)</span>,
str1<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a"</span>,<span class='st'>"b"</span>,<span class='st'>"c"</span>,<span class='st'>"l"</span>,<span class='st'>"l"</span>,<span class='st'>"p"</span>,<span class='st'>"p"</span>,<span class='st'>"p"</span>,<span class='cn'>NA</span>,<span class='cn'>NA</span>,<span class='st'>"x"</span>,<span class='st'>"y"</span><span class='op'>)</span>,
str2<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"d"</span>,<span class='st'>"d"</span>,<span class='st'>"e"</span>,<span class='st'>"k"</span>,<span class='st'>"k"</span>,<span class='st'>"o"</span>,<span class='st'>"o"</span>,<span class='st'>"o"</span>,<span class='cn'>NA</span>,<span class='cn'>NA</span>,<span class='st'>"v"</span>,<span class='st'>"w"</span><span class='op'>)</span>,
str3<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"f"</span>,<span class='st'>"g"</span>,<span class='st'>"f"</span>,<span class='st'>"n"</span>,<span class='st'>"n"</span>,<span class='st'>"s"</span>,<span class='st'>"r"</span>,<span class='st'>"s"</span>,<span class='st'>"t"</span>,<span class='st'>"t"</span>,<span class='st'>"z"</span>,<span class='st'>"u"</span><span class='op'>)</span>,
str4<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"h"</span>,<span class='st'>"i"</span>,<span class='st'>"j"</span>,<span class='st'>"m"</span>,<span class='st'>"m"</span>,<span class='st'>"q"</span>,<span class='st'>"q"</span>,<span class='st'>"q"</span>,<span class='cn'>NA</span>,<span class='cn'>NA</span>,<span class='st'>"ab"</span>,<span class='st'>"ac"</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>getDup</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     id str1 str2 str3 str4 dup.numb dup.prop        dup.ID
#&gt; 1  a_1    a    d    f    h        2      0.5 [a_1|b_3|c_7]
#&gt; 2  b_3    b    d    g    i        1     0.25 [a_1|b_3|c_7]
#&gt; 3  c_7    c    e    f    j        1     0.25 [a_1|b_3|c_7]
#&gt; 4  d_5    l    k    n    m        4        1       d_5|e_3
#&gt; 5  e_3    l    k    n    m        4        1       d_5|e_3
#&gt; 6  f_4    p    o    s    q        4        1   f_4|g_2|h_8
#&gt; 7  g_2    p    o    r    q        3     0.75   f_4|g_2|h_8
#&gt; 8  h_8    p    o    s    q        4        1   f_4|g_2|h_8
#&gt; 9  i_9 &lt;NA&gt; &lt;NA&gt;    t &lt;NA&gt;        1     0.25       i_9|j_6
#&gt; 10 j_6 &lt;NA&gt; &lt;NA&gt;    t &lt;NA&gt;        1     0.25       i_9|j_6
#&gt; 11 k_7    x    v    z   ab        0        0          &lt;NA&gt;
#&gt; 12 l_1    y    w    u   ac        0        0          &lt;NA&gt;</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Renato A. Ferreira de Lima, Sara R. Mortara, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


