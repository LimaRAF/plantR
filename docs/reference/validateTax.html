<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Confidence on Species Identification — validateTax • plantR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Confidence on Species Identification — validateTax" />
<meta property="og:description" content="This function assigns different categories of confidence level
(i.e. high, medium, low or unknown) to the identification of species
records, based on the name of the person who provided the species
identification and on type specimens." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plantR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/plantr_introduction.html">An Introduction to __plantR__</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/LimaRAF/plantR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Confidence on Species Identification</h1>
    <small class="dont-index">Source: <a href='https://github.com/LimaRAF/plantR/blob/master/R/validateTax.R'><code>R/validateTax.R</code></a></small>
    <div class="hidden name"><code>validateTax.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function assigns different categories of confidence level
(i.e. high, medium, low or unknown) to the identification of species
records, based on the name of the person who provided the species
identification and on type specimens.</p>
    </div>

    <pre class="usage"><span class='fu'>validateTax</span><span class='op'>(</span>
  <span class='va'>x</span>,
  col.names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>family <span class='op'>=</span> <span class='st'>"family.new"</span>, det.name <span class='op'>=</span> <span class='st'>"identifiedBy.new"</span>, col.name <span class='op'>=</span>
    <span class='st'>"recordedBy.new"</span>, types <span class='op'>=</span> <span class='st'>"typeStatus"</span>, rec.ID <span class='op'>=</span> <span class='st'>"numTombo"</span>, rec.type <span class='op'>=</span>
    <span class='st'>"basisOfRecord"</span><span class='op'>)</span>,
  special.collector <span class='op'>=</span> <span class='cn'>TRUE</span>,
  generalist <span class='op'>=</span> <span class='cn'>FALSE</span>,
  generalist.class <span class='op'>=</span> <span class='st'>"medium"</span>,
  other.records <span class='op'>=</span> <span class='cn'>NULL</span>,
  miss.taxonomist <span class='op'>=</span> <span class='cn'>NULL</span>,
  taxonomist.list <span class='op'>=</span> <span class='st'>"plantR"</span>,
  voucher.list <span class='op'>=</span> <span class='cn'>NULL</span>,
  noName <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"semdeterminador"</span>, <span class='st'>"anonymus"</span>, <span class='st'>"anonymous"</span>, <span class='st'>"anonimo"</span>, <span class='st'>"incognito"</span>,
    <span class='st'>"unknown"</span>, <span class='st'>"s.d."</span>, <span class='st'>"s.n."</span><span class='op'>)</span>,
  top.det <span class='op'>=</span> <span class='fl'>10</span>,
  print <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a data frame with the species records.</p></td>
    </tr>
    <tr>
      <th>col.names</th>
      <td><p>vector. A named vector containing the names of columns in
the input data frame for each of the information needed to assign
confidence levels to species identifications. Default to the <strong>plantR</strong>
output column names.</p></td>
    </tr>
    <tr>
      <th>special.collector</th>
      <td><p>Logical. Specimens collected by the family
specialist but with empty determiner field, should be classified as high
confidence level? Default to TRUE.</p></td>
    </tr>
    <tr>
      <th>generalist</th>
      <td><p>Logical. Should family generalists be considered for
taxonomic validation? Default to FALSE.</p></td>
    </tr>
    <tr>
      <th>generalist.class</th>
      <td><p>Character. Confidence level to be assigned to family
generalists. Default to "medium".</p></td>
    </tr>
    <tr>
      <th>other.records</th>
      <td><p>Character or Integer. The Confidence level (if
character) or the number of downgrading steps to be assigned to records
which are not preserved specimens. Default to NULL (all record types are
treated the same).</p></td>
    </tr>
    <tr>
      <th>miss.taxonomist</th>
      <td><p>Vector. Any missing combination of family x taxonomist
that should be added to the validation?</p></td>
    </tr>
    <tr>
      <th>taxonomist.list</th>
      <td><p>a data.frame containing the list of taxonomist names.
The default is "plantR", the internal <code>plantR</code> global database of plant
taxonomists (see Details).</p></td>
    </tr>
    <tr>
      <th>voucher.list</th>
      <td><p>Vector. One or more unique record identifiers (i.e.
combination of collection code and number) that should be flagged with a
high confidence level? Default to NULL.</p></td>
    </tr>
    <tr>
      <th>noName</th>
      <td><p>Vector. One or more characters (in lower cases) with the
standard notation for missing data in the field 'det.name'. Default to some
typical notation found in herbarium data.</p></td>
    </tr>
    <tr>
      <th>top.det</th>
      <td><p>Numerical. How many of the top missing identifiers should be
printed? Default to 10.</p></td>
    </tr>
    <tr>
      <th>print</th>
      <td><p>logical. Should the table of missing identifiers be printed?
Default to TRUE.</p></td>
    </tr>
    <tr>
      <th>rec.ID</th>
      <td><p>Character. The name of the columns containing the unique record
identifier (see function <code><a href='getTombo.html'>getTombo()</a></code>). Default to 'numTombo'.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The input data frame <code>x</code>, plus a new column 'tax.check'
containing the classes of confidence in species identifications.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The input data frame <code>x</code> must contain at least the columns with the
information on the record family and the name of the person that provided the
species identification. Preferably, this data frame should also contain
information on type specimens and collectors names. If the user provide a
list of records to be flagged as having a high confidence level in the
identification, the user must also provide the column where the record unique
identifiers are stored. The names of these columns should be provided as a
named vector to the argument <code>col.names</code>, as follows:</p><ul>
<li><p>'family': the botanical family (default: 'family.new')</p></li>
<li><p>'det.name': the identifier name (default: 'identifiedBy.new')</p></li>
<li><p>'col.name': the collector name (default: 'recordedBy.new')</p></li>
<li><p>'types': type specimens (default: 'typeStatus')</p></li>
<li><p>'rec.ID': the collector serial number (default: 'numTombo')</p></li>
<li><p>'rec.type': the type of record (default: 'basisOfRecord')</p></li>
</ul>

<p>As for other functions in <strong>plantR</strong>, using a data frame <code>x</code> that has
already passed by the editing steps of the <strong>plantR</strong> workflow should result
in more accurate outputs.</p>
<p>The function classifies as high confidence level all records whose species
identifications were performed by a family specialist or any type specimens
(isotype, paratypes, etc). By default, the names of family specialists are
obtained from a global list of about 8,500 plant taxonomists names
constructed by Lima et al. (2020) and provided with <strong>plantR</strong>. This
list was built based on information from the
<a href='http://kiki.huh.harvard.edu/databases'>Harvard University Herbaria</a>, the
<a href='http://www.botanica.org.br/rbh'>Brazilian Herbaria Network</a> and the
<a href='https://members.aspt.net'>American Society of Plant Taxonomists</a>.
The dictionary was manually complemented for missing names of taxonomists and
it includes common variants of taxonomists names (e.g., missing initials,
typos, married or maiden names).</p>
<p>If a column containing the Darwin Core field 'basisOfRecord' or equivalent is
provided ('rec.type' in argument <code>col.names</code>), then by default, <strong>all
occurrences that are not preserved specimens (i.e. human/machine
observations, photos, living specimens, etc.) are classified as having a low
confidence level</strong>.</p>
<p>Some specimens are collected by a specialist of the family, but the
identifier information is missing. By default, we assume the same confidence
level for these specimens as that assigned for specimens where the identifier
is the family specialist. But users can choose otherwise by setting the
argument <code>special.collector</code> to FALSE.</p>
<p>The arguments <code>generalist</code> and <code>generalist.class</code> define if taxonomists that
provide identifications for many different families outside his specialty,
often referred to as a generalist, should be considered in the validation and
under which confidence level. There are some names of generalists in the
<strong>plantR</strong> default taxonomist database; however, this list of generalist
names is currently biased towards plant collectors in South America,
particularly in Brazil.</p>
<p>The argument <code>other.records</code> controls what to do with types of records which
are not preserved specimens (Darwin Core field
<a href='http://rs.tdwg.org/dwc/terms/basisOfRecord'>basisOfRecord</a>). If the argument
is NULL (default), all record types are treated the same. Users can set the
argument to one of the confidence levels (i.e. 'unknown', 'low', 'medium' or
'high') to assign the same class for all non preserved specimens or to a
value (i.e., 1 or 2), which correspond to the number of downgrading steps
among levels. For instance, if <code>other.records</code> is one, the 'high' level
becomes 'medium' and the 'medium' level becomes 'low' ('unknown' and 'low'
levels remain the same).</p>
<p>If you miss the validation from one or more taxonomists, you can include them
using the argument <code>miss.taxonomist</code>. The format should be:
the name of the family of specialty followed by an underscore and then
the taxonomist name in the TDWG format (e.g. "Bignoniaceae_Gentry, A.H.").</p>
<p>A database of taxonomists different than the <code>plantR</code> default can be used.
This database must be provided using the argument <code>taxonomist.list</code> and it
must contain the columns 'family' and 'tdwg.name'. The first column is the
family of specialty of the taxonomist and the second one is her/his name in
the TDWG format. See <code>plantR</code> function <code><a href='prepName.html'>prepName()</a></code> on how to get names in
the TDWG format from a list of people's names.</p>
<p>Finally, the user can provide a list of records that should be flagged as
having a high confidence level on their identification. This list should be
provided using the argument <code>voucher.list</code> and the information that should be
provided is the record unique identifier (i.e. combination of collection code
and number). It is important that the way in which the list of unique
identifiers was generated matches the one used to construct the the
identifiers in the input data frame <code>x</code> (see help of function
<code><a href='getTombo.html'>getTombo()</a></code>). If a list of records is provided, the user must also
provide a valid column name in <code>x</code> containing the unique record
identifiers in <code>col.names</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Lima, R.A.F. et al. 2020. Defining endemism levels for biodiversity
conservation: Tree species in the Atlantic Forest hotspot. Biological
Conservation, 252: 108825.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='prepName.html'>prepName</a> and <a href='getTombo.html'>getTombo</a>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='op'>(</span><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
family.new <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Bignoniaceae"</span>, <span class='st'>"Bignoniaceae"</span>,<span class='st'>"Bignoniaceae"</span>,
<span class='st'>"Bignoniaceae"</span>,<span class='st'>"Bignoniaceae"</span>,<span class='st'>"Bignoniaceae"</span><span class='op'>)</span>,
identifiedBy.new <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Gentry, A.H."</span>, <span class='st'>"Hatschbach, G."</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='st'>"Hatschbach, G."</span><span class='op'>)</span>,
recordedBy.new <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='st'>"Gentry, A.H."</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span><span class='op'>)</span>,
typeStatus <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='st'>"isotype"</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span><span class='op'>)</span>,
numTombo <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"a_1"</span>,<span class='st'>"b_3"</span>,<span class='st'>"c_7"</span>,<span class='st'>"d_5"</span>,<span class='st'>"e_3"</span>,<span class='st'>"f_4"</span><span class='op'>)</span>,
stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     family.new identifiedBy.new recordedBy.new typeStatus numTombo
#&gt; 1 Bignoniaceae     Gentry, A.H.           &lt;NA&gt;       &lt;NA&gt;      a_1
#&gt; 2 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      b_3
#&gt; 3 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;    isotype      c_7
#&gt; 4 Bignoniaceae             &lt;NA&gt;   Gentry, A.H.       &lt;NA&gt;      d_5
#&gt; 5 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;      e_3
#&gt; 6 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      f_4</div><div class='input'>
<span class='fu'>validateTax</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Top people with many determinations but not in the taxonomist list: 
#&gt; 
#&gt; |Identifier     | Records|
#&gt; |:--------------|-------:|
#&gt; |Hatschbach, G. |       2|
#&gt; </div><div class='output co'>#&gt;     family.new identifiedBy.new recordedBy.new typeStatus numTombo tax.check
#&gt; 1 Bignoniaceae     Gentry, A.H.           &lt;NA&gt;       &lt;NA&gt;      a_1      high
#&gt; 2 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      b_3       low
#&gt; 3 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;    isotype      c_7      high
#&gt; 4 Bignoniaceae             &lt;NA&gt;   Gentry, A.H.       &lt;NA&gt;      d_5      high
#&gt; 5 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;      e_3   unknown
#&gt; 6 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      f_4       low</div><div class='input'><span class='fu'>validateTax</span><span class='op'>(</span><span class='va'>df</span>, generalist <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     family.new identifiedBy.new recordedBy.new typeStatus numTombo tax.check
#&gt; 1 Bignoniaceae     Gentry, A.H.           &lt;NA&gt;       &lt;NA&gt;      a_1      high
#&gt; 2 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      b_3    medium
#&gt; 3 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;    isotype      c_7      high
#&gt; 4 Bignoniaceae             &lt;NA&gt;   Gentry, A.H.       &lt;NA&gt;      d_5      high
#&gt; 5 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;      e_3   unknown
#&gt; 6 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      f_4    medium</div><div class='input'><span class='fu'>validateTax</span><span class='op'>(</span><span class='va'>df</span>, voucher.list <span class='op'>=</span> <span class='st'>"f_4"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Top people with many determinations but not in the taxonomist list: 
#&gt; 
#&gt; |Identifier     | Records|
#&gt; |:--------------|-------:|
#&gt; |Hatschbach, G. |       2|
#&gt; </div><div class='output co'>#&gt;     family.new identifiedBy.new recordedBy.new typeStatus numTombo tax.check
#&gt; 1 Bignoniaceae     Gentry, A.H.           &lt;NA&gt;       &lt;NA&gt;      a_1      high
#&gt; 2 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      b_3       low
#&gt; 3 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;    isotype      c_7      high
#&gt; 4 Bignoniaceae             &lt;NA&gt;   Gentry, A.H.       &lt;NA&gt;      d_5      high
#&gt; 5 Bignoniaceae             &lt;NA&gt;           &lt;NA&gt;       &lt;NA&gt;      e_3   unknown
#&gt; 6 Bignoniaceae   Hatschbach, G.           &lt;NA&gt;       &lt;NA&gt;      f_4      high</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Renato A. Ferreira de Lima, Sara R. Mortara, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


