<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Format Locality Information — fixLoc • plantR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Format Locality Information — fixLoc" />
<meta property="og:description" content="Standardize the notation of the locality fields country,
stateProvince, municipality and locality, and search from some missing
information within the available locality information." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plantR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/plantr_introduction.html">An Introduction to __plantR__</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/LimaRAF/plantR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Format Locality Information</h1>
    <small class="dont-index">Source: <a href='https://github.com/LimaRAF/plantR/blob/master/R/fixLoc.R'><code>R/fixLoc.R</code></a></small>
    <div class="hidden name"><code>fixLoc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Standardize the notation of the locality fields country,
stateProvince, municipality and locality, and search from some missing
information within the available locality information.</p>
    </div>

    <pre class="usage"><span class='fu'>fixLoc</span><span class='op'>(</span>
  <span class='va'>x</span>,
  loc.levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"country"</span>, <span class='st'>"stateProvince"</span>, <span class='st'>"municipality"</span>, <span class='st'>"locality"</span><span class='op'>)</span>,
  scrap <span class='op'>=</span> <span class='cn'>TRUE</span>,
  to.lower <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a data frame containing typical locality fields from species
records.</p></td>
    </tr>
    <tr>
      <th>loc.levels</th>
      <td><p>a vector containing the names of the locality fields to be
formatted.</p></td>
    </tr>
    <tr>
      <th>scrap</th>
      <td><p>logical. Should the search of missing locality information be
performed? Default to TRUE.</p></td>
    </tr>
    <tr>
      <th>to.lower</th>
      <td><p>logical. Should the output locality names be return in lower
cases? Default to TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The input data frame <code>x</code>, plus the '.new' columns with the
formatted fields and the resolution of the locality information available.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function performs several edits and replacements. Country names
are formatted into the international format, letters are lower-cased, and
special characters and common abbreviations are removed.</p>
<p>By default, this function formats all four locality fields simultaneously
(i.e. country, stateProvince, municipality, locality), but the user can
choose among these fields through the argument <code>loc.levels</code>. However, the
process of searching for missing information is more complete if all the
four locality fields mentioned above are available.</p>
<p>If present, other Darwin Core fields are used internally to obtain missing
information on the locality fields declared above, namely: 'countryCode',
'county', and 'verbatimLocality'.</p>
<p>The argument <code>scrap</code> controls the search for missing municipality
information from the field 'locality'. It also performs some extra editing
and cropping of the field 'locality' in order to obtain more standardized
locality descriptions. This argument uses different ways of splitting and
cropping the locality description in order to find missing information.
Although it does not always result in an accurate extraction of the
information, it provides an extra tool to organize locality information
which are not provided in the appropriate columns.</p>
<p>The function automatically returns the original resolution of the
locality information provided. For instance, if only country information is
provided (i.e. field is not empty), then the resolution is flagged as
'country'; if country and stateProvince are given, then the resolution is
flagged as 'stateProvince', and so on.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Renato A. F. de Lima</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Creating a data frame with locality information</span>
<span class='op'>(</span><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>country <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"BR"</span>, <span class='st'>"Brasil"</span>, <span class='st'>"BRA"</span>, <span class='st'>"Brazil"</span>, <span class='cn'>NA</span><span class='op'>)</span>,
stateProvince <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"MG"</span>, <span class='st'>"estado de Minas Gerais"</span>, <span class='st'>"Minas Geraes"</span>,
<span class='st'>"Minas Gerais"</span>, <span class='st'>"Minas Gerais"</span><span class='op'>)</span>,
municipality <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lavras"</span>, <span class='st'>"lavras"</span>, <span class='cn'>NA</span>, <span class='cn'>NA</span>, <span class='st'>"Lavras"</span><span class='op'>)</span>,
locality <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>NA</span>, <span class='st'>"UFLA"</span>, <span class='st'>"municipio de Lavras, campus UFLA"</span>,
<span class='st'>"Minas Gerais, municipio Lavras"</span>, <span class='cn'>NA</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   country          stateProvince municipality                         locality
#&gt; 1      BR                     MG       Lavras                             &lt;NA&gt;
#&gt; 2  Brasil estado de Minas Gerais       lavras                             UFLA
#&gt; 3     BRA           Minas Geraes         &lt;NA&gt; municipio de Lavras, campus UFLA
#&gt; 4  Brazil           Minas Gerais         &lt;NA&gt;   Minas Gerais, municipio Lavras
#&gt; 5    &lt;NA&gt;           Minas Gerais       Lavras                             &lt;NA&gt;</div><div class='input'>
<span class='co'># Formating the locality information</span>
<span class='fu'>fixLoc</span><span class='op'>(</span><span class='va'>df</span>, scrap <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   country          stateProvince municipality                         locality
#&gt; 1      BR                     MG       Lavras                             &lt;NA&gt;
#&gt; 2  Brasil estado de Minas Gerais       lavras                             UFLA
#&gt; 3     BRA           Minas Geraes         &lt;NA&gt; municipio de Lavras, campus UFLA
#&gt; 4  Brazil           Minas Gerais         &lt;NA&gt;   Minas Gerais, municipio Lavras
#&gt; 5    &lt;NA&gt;           Minas Gerais       Lavras                             &lt;NA&gt;
#&gt;   country.new stateProvince.new municipality.new
#&gt; 1      brazil      minas gerais           lavras
#&gt; 2      brazil      minas gerais           lavras
#&gt; 3      brazil      minas gerais             &lt;NA&gt;
#&gt; 4      brazil      minas gerais             &lt;NA&gt;
#&gt; 5      brazil      minas gerais           lavras
#&gt;                       locality.new    resol.orig
#&gt; 1                             &lt;NA&gt;  municipality
#&gt; 2                             ufla      locality
#&gt; 3 municipio de lavras, campus ufla stateProvince
#&gt; 4   minas gerais, municipio lavras stateProvince
#&gt; 5                             &lt;NA&gt;  municipality</div><div class='input'><span class='fu'>fixLoc</span><span class='op'>(</span><span class='va'>df</span>, scrap <span class='op'>=</span> <span class='cn'>FALSE</span>, to.lower <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   country          stateProvince municipality                         locality
#&gt; 1      BR                     MG       Lavras                             &lt;NA&gt;
#&gt; 2  Brasil estado de Minas Gerais       lavras                             UFLA
#&gt; 3     BRA           Minas Geraes         &lt;NA&gt; municipio de Lavras, campus UFLA
#&gt; 4  Brazil           Minas Gerais         &lt;NA&gt;   Minas Gerais, municipio Lavras
#&gt; 5    &lt;NA&gt;           Minas Gerais       Lavras                             &lt;NA&gt;
#&gt;   country.new stateProvince.new municipality.new
#&gt; 1      Brazil      Minas Gerais           Lavras
#&gt; 2      Brazil      Minas Gerais           Lavras
#&gt; 3      Brazil      Minas Gerais             &lt;NA&gt;
#&gt; 4      Brazil      Minas Gerais             &lt;NA&gt;
#&gt; 5      Brazil      Minas Gerais           Lavras
#&gt;                       locality.new    resol.orig
#&gt; 1                             &lt;NA&gt;  municipality
#&gt; 2                             Ufla      locality
#&gt; 3 Municipio De Lavras, Campus Ufla stateProvince
#&gt; 4   Minas Gerais, Municipio Lavras stateProvince
#&gt; 5                             &lt;NA&gt;  municipality</div><div class='input'>
<span class='co'># Formating and scrapping the locality information</span>
<span class='fu'>fixLoc</span><span class='op'>(</span><span class='va'>df</span>, scrap <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   country          stateProvince municipality                         locality
#&gt; 1      BR                     MG       Lavras                             &lt;NA&gt;
#&gt; 2  Brasil estado de Minas Gerais       lavras                             UFLA
#&gt; 3     BRA           Minas Geraes         &lt;NA&gt; municipio de Lavras, campus UFLA
#&gt; 4  Brazil           Minas Gerais         &lt;NA&gt;   Minas Gerais, municipio Lavras
#&gt; 5    &lt;NA&gt;           Minas Gerais       Lavras                             &lt;NA&gt;
#&gt;   country.new stateProvince.new municipality.new locality.new
#&gt; 1      brazil      minas gerais           lavras         &lt;NA&gt;
#&gt; 2      brazil      minas gerais           lavras         ufla
#&gt; 3      brazil      minas gerais           lavras  campus ufla
#&gt; 4      brazil      minas gerais           lavras minas gerais
#&gt; 5      brazil      minas gerais           lavras         &lt;NA&gt;
#&gt;        locality.scrap   resol.orig
#&gt; 1                &lt;NA&gt; municipality
#&gt; 2                ufla     locality
#&gt; 3 municipio de lavras     locality
#&gt; 4        minas gerais     locality
#&gt; 5                &lt;NA&gt; municipality</div><div class='input'>
<span class='co'># Formating the locality information only at country and state levels</span>
<span class='fu'>fixLoc</span><span class='op'>(</span><span class='va'>df</span>, loc.levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"country"</span>, <span class='st'>"stateProvince"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>[</span>,<span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span><span class='op'>]</span>
</div><div class='output co'>#&gt;   country.new stateProvince.new    resol.orig
#&gt; 1      brazil      minas gerais stateProvince
#&gt; 2      brazil      minas gerais stateProvince
#&gt; 3      brazil      minas gerais stateProvince
#&gt; 4      brazil      minas gerais stateProvince
#&gt; 5        &lt;NA&gt;      minas gerais       no_info</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Renato A. Ferreira de Lima, Sara R. Mortara, Andrea Sánchez-Tapia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


